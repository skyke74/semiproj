-- 쿼리문만

--loc_id, amenities_id  문자 변환 쿼리문 (image_url,homepage_url 제외)

SELECT H.hotel_id, 
       H.hotel_name, 
       L.loc_name, 
       H.star_rating, 
       H.standard_price,  
       H.deluxe_price,    
       H.premium_price,   
       H.standard_r, 
       H.deluxe_r,       
       H.premium_r,     
       H.contact_number,
       GROUP_CONCAT(A.amenity_name SEPARATOR ', ') AS amenities
FROM Hotels H
JOIN HotelAmenities HA ON H.hotel_id = HA.hotel_id
JOIN Amenities A ON HA.amenity_id = A.amenity_id
JOIN Location L ON H.loc_id = L.loc_id
GROUP BY H.hotel_id, 
         H.hotel_name, 
         L.loc_name, 
         H.star_rating, 
         H.standard_price, 
         H.deluxe_price, 
         H.premium_price,
         H.standard_r, 
         H.deluxe_r, 
         H.premium_r, 
         H.contact_number


--최종통합 Hotels 쿼리문 

SELECT H.hotel_id, 
       H.hotel_name, 
       L.loc_name, 
       H.star_rating, 
       H.standard_price,   -- 스탠다드 방 가격
       H.deluxe_price,     -- 디럭스 방 가격
       H.premium_price,    -- 프리미엄 방 가격
       H.standard_r AS standard_room_count,  -- 스탠다드 방 개수
       H.deluxe_r AS deluxe_room_count,      -- 디럭스 방 개수
       H.premium_r AS premium_room_count,     -- 프리미엄 방 개수
       H.contact_number, 
       H.address, 
       GROUP_CONCAT(A.amenity_name SEPARATOR ', ') AS amenities, 
       H.image_url, 
       H.homepage_url
FROM Hotels H
JOIN HotelAmenities HA ON H.hotel_id = HA.hotel_id
JOIN Amenities A ON HA.amenity_id = A.amenity_id
JOIN Location L ON H.loc_id = L.loc_id
GROUP BY H.hotel_id, 
         H.hotel_name, 
         L.loc_name, 
         H.star_rating, 
         H.standard_price, 
         H.deluxe_price, 
         H.premium_price, 
         H.standard_r, 
         H.deluxe_r, 
         H.premium_r, 
         H.contact_number, 
         H.address, 
         H.image_url, 
         H.homepage_url;


-- 관광명소{ loc_id를 지역명으로 보여주게 하는 쿼리문 }

SELECT TA.attraction_name, L.loc_name, TA.features, TA.address, TA.homepage, TA.image_url
FROM TouristAttractions TA
JOIN Location L ON TA.loc_id = L.loc_id;


-- 새로운 사용자 생성 (username과 password는 원하는 값으로 변경)
CREATE USER 'username'@'%' IDENTIFIED BY 'password';
-- 모든 데이터베이스에 대한 권한 부여
GRANT ALL PRIVILEGES ON *.* TO 'username'@'%';
-- 권한 변경 사항 적용
FLUSH PRIVILEGES;